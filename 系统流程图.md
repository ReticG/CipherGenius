# CipherGenius v3.0 系统流程图

## 主要用户流程

### 1. 密码方案生成主流程

```mermaid
flowchart TD
    Start([用户访问系统]) --> Login{登录/访问}
    Login -->|新用户| Welcome[欢迎页面]
    Login -->|返回用户| Home[主页]

    Welcome --> Home

    Home --> Input[输入安全需求]
    Input --> ValidateInput{验证输入}
    ValidateInput -->|无效| Error1[显示错误提示]
    ValidateInput -->|有效| Config[配置生成选项]

    Error1 --> Input

    Config --> Options[选择选项]
    Options --> Variants[方案变体数量]
    Options --> CodeGen[是否生成代码]
    Options --> AutoValidate[是否自动验证]

    Variants --> Generate[开始生成]
    CodeGen --> Generate
    AutoValidate --> Generate

    Generate --> ParseLLM[LLM解析需求]
    ParseLLM --> SelectComponents[选择密码组件]
    SelectComponents --> DesignScheme[设计方案架构]
    DesignScheme --> ValidateScheme[验证方案安全性]

    ValidateScheme -->|通过| GenerateCode[生成代码实现]
    ValidateScheme -->|失败| Redesign[重新设计]
    Redesign --> SelectComponents

    GenerateCode --> DisplayResults[显示结果]
    DisplayResults --> Review[用户查看]
    Review --> Satisfaction{用户满意?}

    Satisfaction -->|是| SaveExport[保存/导出]
    Satisfaction -->|否| Modify[修改需求]

    Modify --> Input
    SaveExport --> End([流程结束])
```

### 2. 组件库浏览流程

```mermaid
flowchart TD
    StartComp([进入组件库]) --> SearchSearch[搜索和筛选]

    SearchSearch --> CategorySelect{选择分类}
    CategorySelect -->|分组密码| BlockCiphers[显示分组密码]
    CategorySelect -->|哈希函数| HashFunctions[显示哈希函数]
    CategorySelect -->|数字签名| DigitalSigs[显示数字签名]
    CategorySelect -->|密钥交换| KeyExchange[显示密钥交换]
    CategorySelect -->|AEAD模式| AeadModes[显示AEAD模式]
    CategorySelect -->|高级协议| AdvancedProtocols[显示高级协议]

    BlockCiphers --> ComponentDetail[查看组件详情]
    HashFunctions --> ComponentDetail
    DigitalSigs --> ComponentDetail
    KeyExchange --> ComponentDetail
    AeadModes --> ComponentDetail
    AdvancedProtocols --> ComponentDetail

    ComponentDetail --> ViewSpec[查看技术规格]
    ComponentDetail --> ViewSecurity[查看安全属性]
    ComponentDetail --> ViewPerf[查看性能指标]
    ComponentDetail --> ViewUsage[查看使用示例]

    ViewSpec --> UseInScheme[用于方案生成]
    ViewSecurity --> UseInScheme
    ViewPerf --> UseInScheme
    ViewUsage --> UseInScheme

    UseInScheme --> AddToRequirement[添加到需求]
    AddToRequirement --> BackToHome[返回主页生成]

    ComponentDetail --> ContinueBrowsing[继续浏览]
    ContinueBrowsing --> SearchSearch
    BackToHome --> EndComp([流程结束])
```

### 3. 教程学习流程

```mermaid
flowchart TD
    StartTut([进入教程系统]) --> TutorialList[教程列表]

    TutorialList --> SelectLevel{选择难度级别}
    SelectLevel -->|初学者| BeginnerTuts[初级教程]
    SelectLevel -->|中级| IntermediateTuts[中级教程]
    SelectLevel -->|高级| AdvancedTuts[高级教程]

    BeginnerTuts --> ChooseTutorial[选择具体教程]
    IntermediateTuts --> ChooseTutorial
    AdvancedTuts --> ChooseTutorial

    ChooseTutorial --> StartTutorial[开始学习]
    StartTutorial --> ShowProgress[显示学习进度]

    ShowProgress --> Step1[步骤1: 概念介绍]
    Step1 --> Understand{理解概念?}
    Understand -->|否| MoreExplanation[查看更多解释]
    Understand -->|是| Step2[步骤2: 代码示例]

    MoreExplanation --> Step1
    Step2 --> TryCode[尝试代码]
    TryCode --> RunCode[运行代码]
    RunCode --> CheckResult{检查结果}

    CheckResult -->|错误| DebugCode[调试代码]
    CheckResult -->|正确| Step3[步骤3: 练习]

    DebugCode --> TryCode
    Step3 --> DoExercise[完成练习]
    DoExercise --> SubmitAnswer[提交答案]
    SubmitAnswer --> CheckAnswer{检查答案}

    CheckAnswer -->|错误| TryAgain[重新尝试]
    CheckAnswer -->|正确| CompleteStep[完成步骤]

    TryAgain --> DoExercise
    CompleteStep --> NextStep{下一步骤?}

    NextStep -->|有| Step1
    NextStep -->|无| CompleteTutorial[完成教程]

    CompleteTutorial --> GetCertificate[获得证书]
    GetCertificate --> NextTutorial{下一个教程?}

    NextTutorial -->|是| ChooseTutorial
    NextTutorial -->|否| EndTut([流程结束])
```

### 4. 安全分析工具流程

```mermaid
flowchart TD
    StartTools([进入分析工具]) --> SelectTool{选择工具类型}

    SelectTool -->|方案比较| SchemeCompare[方案比较器]
    SelectTool -->|安全评估| SecurityAssess[安全评估器]
    SelectTool -->|漏洞扫描| VulnerabilityScan[漏洞扫描器]
    SelectTool -->|合规检查| ComplianceCheck[合规检查器]
    SelectTool -->|性能评估| PerformanceAssess[性能评估器]

    SchemeCompare --> SelectSchemes[选择要比较的方案]
    SecurityAssess --> SelectScheme[选择评估方案]
    VulnerabilityScan --> SelectSchemeVS[选择扫描方案]
    ComplianceCheck --> SelectSchemeCC[选择检查方案]
    PerformanceAssess --> SelectSchemePE[选择评估方案]

    SelectSchemes --> CompareConfig[配置比较参数]
    SelectScheme --> AssessConfig[配置评估参数]
    SelectSchemeVS --> ScanConfig[配置扫描参数]
    SelectSchemeCC --> ComplianceConfig[配置合规参数]
    SelectSchemePE --> PerfConfig[配置性能参数]

    CompareConfig --> RunCompare[执行比较]
    AssessConfig --> RunAssess[执行评估]
    ScanConfig --> RunScan[执行扫描]
    ComplianceConfig --> RunCompliance[执行合规检查]
    PerfConfig --> RunPerf[执行性能评估]

    RunCompare --> CompareResults[比较结果]
    RunAssess --> AssessResults[评估结果]
    RunScan --> ScanResults[扫描结果]
    RunCompliance --> ComplianceResults[合规结果]
    RunPerf --> PerfResults[性能结果]

    CompareResults --> AnalyzeCompare[分析比较结果]
    AssessResults --> AnalyzeAssess[分析评估结果]
    ScanResults --> AnalyzeScan[分析扫描结果]
    ComplianceResults --> AnalyzeCompliance[分析合规结果]
    PerfResults --> AnalyzePerf[分析性能结果]

    AnalyzeCompare --> RecommendationsCompare[优化建议]
    AnalyzeAssess --> RecommendationsAssess[安全建议]
    AnalyzeScan --> RecommendationsScan[修复建议]
    AnalyzeCompliance --> RecommendationsCompliance[合规建议]
    AnalyzePerf --> RecommendationsPerf[性能建议]

    RecommendationsCompare --> ExportReport[导出报告]
    RecommendationsAssess --> ExportReport
    RecommendationsScan --> ExportReport
    RecommendationsCompliance --> ExportReport
    RecommendationsPerf --> ExportReport

    ExportReport --> EndTools([流程结束])
```

### 5. 导出分享流程

```mermaid
flowchart TD
    StartExport([进入导出分享]) --> SelectScheme[选择要导出的方案]

    SelectScheme --> VerifyExport{验证方案}
    VerifyExport -->|无效| ErrorExport[显示错误]
    VerifyExport -->|有效| SelectFormat[选择导出格式]

    ErrorExport --> SelectScheme

    SelectFormat --> JSONFormat[JSON格式]
    SelectFormat --> MarkdownFormat[Markdown格式]
    SelectFormat --> LaTeXFormat[LaTeX格式]
    SelectFormat --> YAMLFormat[YAML格式]
    SelectFormat --> PDFFormat[PDF格式]

    JSONFormat --> ProcessJSON[处理JSON导出]
    MarkdownFormat --> ProcessMD[处理Markdown导出]
    LaTeXFormat --> ProcessTeX[处理LaTeX导出]
    YAMLFormat --> ProcessYAML[处理YAML导出]
    PDFFormat --> ProcessPDF[处理PDF导出]

    ProcessJSON --> ValidateJSON[验证JSON格式]
    ProcessMD --> ValidateMD[验证Markdown格式]
    ProcessTeX --> ValidateTeX[验证LaTeX格式]
    ProcessYAML --> ValidateYAML[验证YAML格式]
    ProcessPDF --> ValidatePDF[验证PDF格式]

    ValidateJSON --> GenerateFileJSON[生成JSON文件]
    ValidateMD --> GenerateFileMD[生成MD文件]
    ValidateTeX --> GenerateFileTeX[生成TeX文件]
    ValidateYAML --> GenerateFileYAML[生成YAML文件]
    ValidatePDF --> GenerateFilePDF[生成PDF文件]

    GenerateFileJSON --> PreviewJSON[预览JSON内容]
    GenerateFileMD --> PreviewMD[预览MD内容]
    GenerateFileTeX --> PreviewTeX[预览TeX内容]
    GenerateFileYAML --> PreviewYAML[预览YAML内容]
    GenerateFilePDF --> PreviewPDF[预览PDF内容]

    PreviewJSON --> ConfirmExportJSON{确认导出?}
    PreviewMD --> ConfirmExportMD{确认导出?}
    PreviewTeX --> ConfirmExportTeX{确认导出?}
    PreviewYAML --> ConfirmExportYAML{确认导出?}
    PreviewPDF --> ConfirmExportPDF{确认导出?}

    ConfirmExportJSON -->|是| DownloadJSON[下载JSON文件]
    ConfirmExportMD -->|是| DownloadMD[下载MD文件]
    ConfirmExportTeX -->|是| DownloadTeX[下载TeX文件]
    ConfirmExportYAML -->|是| DownloadYAML[下载YAML文件]
    ConfirmExportPDF -->|是| DownloadPDF[下载PDF文件]

    ConfirmExportJSON -->|否| BackToFormatJSON[返回格式选择]
    ConfirmExportMD -->|否| BackToFormatMD[返回格式选择]
    ConfirmExportTeX -->|否| BackToFormatTeX[返回格式选择]
    ConfirmExportYAML -->|否| BackToFormatYAML[返回格式选择]
    ConfirmExportPDF -->|否| BackToFormatPDF[返回格式选择]

    BackToFormatJSON --> SelectFormat
    BackToFormatMD --> SelectFormat
    BackToFormatTeX --> SelectFormat
    BackToFormatYAML --> SelectFormat
    BackToFormatPDF --> SelectFormat

    DownloadJSON --> CreateShareLink[创建分享链接]
    DownloadMD --> CreateShareLink
    DownloadTeX --> CreateShareLink
    DownloadYAML --> CreateShareLink
    DownloadPDF --> CreateShareLink

    CreateShareLink --> ShareOptions[分享选项]
    ShareOptions --> PublicShare[公开分享]
    ShareOptions --> PrivateShare[私有分享]
    ShareOptions --> TeamShare[团队分享]

    PublicShare --> GenerateLink[生成链接]
    PrivateShare --> GenerateLink
    TeamShare --> GenerateLink

    GenerateLink --> CopyLink[复制链接]
    CopyLink --> SendInvite[发送邀请]
    SendInvite --> EndExport([流程结束])
```

## 系统数据流程

### 6. 数据流架构

```mermaid
flowchart LR
    subgraph "数据输入"
        UserInput[用户输入]
        APIRequest[API请求]
        ConfigFile[配置文件]
    end

    subgraph "数据处理"
        subgraph "验证层"
            InputValidation[输入验证]
            SecurityCheck[安全检查]
            FormatValidation[格式验证]
        end

        subgraph "核心处理"
            LLMProcessing[LLM处理]
            ComponentSelection[组件选择]
            SchemeGeneration[方案生成]
            CodeGeneration[代码生成]
        end

        subgraph "后处理"
            ResultValidation[结果验证]
            SecurityAudit[安全审计]
            FormatOutput[格式化输出]
        end
    end

    subgraph "数据输出"
        WebDisplay[Web显示]
        FileExport[文件导出]
        APIResponse[API响应]
        ShareLink[分享链接]
    end

    subgraph "数据存储"
        Cache[缓存存储]
        Database[数据库]
        FileStorage[文件存储]
        LogStorage[日志存储]
    end

    UserInput --> InputValidation
    APIRequest --> InputValidation
    ConfigFile --> InputValidation

    InputValidation --> SecurityCheck
    SecurityCheck --> FormatValidation
    FormatValidation --> LLMProcessing

    LLMProcessing --> ComponentSelection
    ComponentSelection --> SchemeGeneration
    SchemeGeneration --> CodeGeneration

    CodeGeneration --> ResultValidation
    ResultValidation --> SecurityAudit
    SecurityAudit --> FormatOutput

    FormatOutput --> WebDisplay
    FormatOutput --> FileExport
    FormatOutput --> APIResponse
    FormatOutput --> ShareLink

    LLMProcessing --> Cache
    SchemeGeneration --> Database
    CodeGeneration --> FileStorage
    SecurityAudit --> LogStorage
```

### 7. 错误处理流程

```mermaid
flowchart TD
    ErrorStart([发生错误]) --> ErrorType{错误类型}

    ErrorType -->|输入错误| InputError[输入错误处理]
    ErrorType -->|LLM错误| LLMError[LLM错误处理]
    ErrorType -->|系统错误| SystemError[系统错误处理]
    ErrorType -->|网络错误| NetworkError[网络错误处理]

    InputError --> ValidateInput[重新验证输入]
    LLMError --> RetryLLM[重试LLM请求]
    SystemError --> LogError[记录错误日志]
    NetworkError --> CheckConnection[检查网络连接]

    ValidateInput --> ShowInputError[显示输入错误]
    RetryLLM --> FallbackLLM[切换备用LLM]
    LogError --> ShowSystemError[显示系统错误]
    CheckConnection --> ShowNetworkError[显示网络错误]

    ShowInputError --> CorrectInput[引导用户修正]
    FallbackLLM --> RetryWithFallback[使用备用LLM重试]
    ShowSystemError --> ContactSupport[联系技术支持]
    ShowNetworkError --> RetryConnection[重试连接]

    CorrectInput --> SuccessRecovery[成功恢复]
    RetryWithFallback --> SuccessRecovery
    RetryConnection --> SuccessRecovery

    FallbackLLM -->|所有LLM失败| AllLLMFailed[所有LLM不可用]
    RetryConnection -->|连接失败| ConnectionFailed[连接彻底失败]

    AllLLMFailed --> OfflineMode[离线模式]
    ConnectionFailed --> OfflineMode

    OfflineMode --> LimitedFunctionality[功能受限]
    LimitedFunctionality --> ErrorEnd([错误处理结束])

    SuccessRecovery --> NormalFlow[恢复正常流程]
    NormalFlow --> ErrorEnd
```

## 系统集成流程

### 8. 多模块协作流程

```mermaid
flowchart TD
    UserRequest([用户请求]) --> Router[请求路由器]

    Router --> Authentication{身份验证}
    Authentication -->|失败| AuthError[认证错误]
    Authentication -->|成功| Authorization{权限检查}

    Authorization -->|无权限| PermError[权限错误]
    Authorization -->|有权限| LoadConfig[加载配置]

    LoadConfig --> InitComponents[初始化组件]
    InitComponents --> ValidateSystem{系统自检}

    ValidateSystem -->|失败| SystemError[系统错误]
    ValidateSystem -->|成功| ProcessRequest[处理请求]

    ProcessRequest --> SelectModules[选择功能模块]
    SelectModules --> Module1[模块1: 需求解析]
    SelectModules --> Module2[模块2: 方案生成]
    SelectModules --> Module3[模块3: 安全验证]
    SelectModules --> Module4[模块4: 代码生成]

    Module1 --> Module2
    Module2 --> Module3
    Module3 --> Module4

    Module4 --> IntegrateResults[集成结果]
    IntegrateResults --> PostProcess[后处理]
    PostProcess --> FormatResponse[格式化响应]
    FormatResponse --> CacheResponse[缓存响应]
    CacheResponse --> ReturnResponse[返回响应]

    ReturnResponse --> Logging[记录日志]
    Logging --> Monitoring[性能监控]
    Monitoring --> Cleanup[资源清理]
    Cleanup --> EndFlow([流程结束])

    AuthError --> EndFlow
    PermError --> EndFlow
    SystemError --> EndFlow
```

这些流程图详细描述了CipherGenius v3.0系统各个方面的业务流程，包括用户交互、数据处理、错误处理和系统集成等关键环节，为理解系统的工作机制提供了清晰的视觉指导。